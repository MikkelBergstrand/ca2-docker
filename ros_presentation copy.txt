# Talk about sourcing the workspace.

sudo apt-get install ros-noetic-ros-tutorials

# Spawn turtle window

rosrun turtlesim turtlesim_node

# Spawn teleop_key

rosrun turtlesim turtle_teleop_key

# Demonstrate rqt

rqt

# List nodes

rosnode list


# Info about a node

rosnode info <node_name> # ROS topic list 
ros2 topic list

# Ros2 topic list (with message type)

rostopic list
rostopic list -v
rostopic type /turtle1/cmd_vel

# Demonstrate how to echo a topic.
# Need to make some inputs to teleop_turtle to get this to work.

rostopic echo /turtle1/cmd_vel

## Types

rosmsg show geometry_msgs/Twist

# Publish to a topic from the CLI

rostopic pub /turtle1/cmd_vel geometry_msgs/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"

## SERVICES

rosservice list 

rosservice type /clear 
rosservice type /spawn

rossrv type turtlesim/Spawn

rosservice call /clear

rosservice call /spawn 2 2 0.2 "Jimmy"

## ACTIONS
# Are similair

# Parameters (must spawn turtlesim_node and turtle_teleop_key)
rosparam list

rosparam get /turtlesim background_g

rosparam set /turtlesim background_r 150

rosparam dump > turtlesim.yaml

rosparam load turtlesim.yaml copy_turtle

## LAUNCH FILE

# From launch file. Rememember to show the launch file
roslaunch turtlemimic.launch
rosrun turtlesim turtle_teleop_key /turtle1/cmd_vel:=/turtlesim1/turtle1/cmd_vel

## BAGGING

rosbag record -o mybag /turtle1/cmd_vel /turtle1/pose
rosbag play <bag_file>

## OWN PACKAGES

# Set up workspace
# We do this in VS Code

# Create a new package with a node talker
catkin_create_pkg talker_listener std_msgs rospy

catkin_install_python(PROGRAMS scripts/talker.py scripts/listener.py
  DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION}
)

# Message generation

# Uncomment these in package.xml
<build_depend>message_generation</build_depend>
<exec_depend>message_runtime</exec_depend>


find_package(catkin REQUIRED COMPONENTS
   rospy
   std_msgs
   message_generation # Add this
)

# Add message_runtime
catkin_package(
  ...
  CATKIN_DEPENDS message_runtime ...
  ...)

# add this
add_message_files(
  FILES
  Pose.msg
)

#uncomment this
generate_messages(
  DEPENDENCIES
  std_msgs
)

# Verify it works
catkin_make # 
source devel/setup.bash
rosmsg show talker_listener/Pose

# Custom types


